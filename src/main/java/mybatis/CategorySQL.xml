<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="category">
	
	<select id="selectCagroup" resultType="hashmap">
		<![CDATA[
			SELECT DISTINCT CA_LSECTION
			FROM CATEGORY 
		]]>
	</select>
	
	<select id="selectComputer" resultType="hashmap">
		<![CDATA[
			SELECT  CA_SSECTION
			FROM CATEGORY
			WHERE CA_NO LIKE '1-%'
		]]>
	</select>

	<select id="selectFLanguage" resultType="hashmap">
		<![CDATA[
			SELECT CA_SSECTION
			FROM CATEGORY
			WHERE CA_NO LIKE '2-%'
		]]>
	</select>
	
	<select id="selectLifeStyle" resultType="hashmap">
		<![CDATA[
		
			SELECT CA_SSECTION
			FROM CATEGORY
			WHERE CA_NO LIKE '3-%'
		]]>
	</select>
	
	<select id="selectEtc" resultType="hashmap">
		<![CDATA[
			SELECT CA_SSECTION
			FROM CATEGORY
			WHERE CA_NO LIKE '4-%'
		]]>
	</select>
	
	<select id="selectCA_IDX" parameterType="hashmap" resultType="string">
		<![CDATA[
			SELECT CA_IDX
			FROM CATEGORY
			WHERE CA_SSECTION=#{CA_SSECTION}
		]]>
	</select>
	
	<select id="selectcate1" parameterType="hashmap" resultType="hashmap">
		<include refid="common.pagingPre"/>
		<![CDATA[
		select ROW_NUMBER() OVER (ORDER BY a.L_NO DESC) RNUM, t.*, a.*
		from l_location t, (select * from l_open
					 where ca_idx in (select ca_idx 
            	     				 from category 
            	   					 where ca_no like '1-%'
           	    					 )
           	    	 )a
		where t.l_no = a.l_no
           	    	
        ]]>
        <include refid="common.pagingPost"/>
	</select>
	
	<select id="selectcate2" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
		select t.*, a.*
		from l_location t, (select * from l_open
					 where ca_idx in (select ca_idx 
            	     				 from category 
            	   					 where ca_no like '2-%'
           	    					 )
           	    	 )a
		where t.l_no = a.l_no
        ]]>
	</select>
	
	<select id="selectcate3" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
	select t.*, a.*
		from l_location t, (select * from l_open
					 where ca_idx in (select ca_idx 
            	     				 from category 
            	   					 where ca_no like '3-%'
           	    					 )
           	    	 )a
		where t.l_no = a.l_no
        ]]>
	</select>
	
	<select id="selectcate4" parameterType="hashmap" resultType="hashmap">
		<![CDATA[
		select t.*, a.*
		from l_location t, (select * from l_open
					 where ca_idx in (select ca_idx 
            	     				 from category 
            	   					 where ca_no like '4-%'
           	    					 )
           	    	 )a
		where t.l_no = a.l_no
        ]]>
	</select>
	
	
	
	<!--
		혹시 나중에 필요할지도 모르니까..
	 select l_no, l_subject from l_open
					 where ca_idx in (select ca_idx 
            	     				 from category 
            	   					 where ca_no like '1-%'
           	    					 )
	
	
	select ll_location, l_no
		from l_location
		where l_no = (select l_no from l_open
					  where ca_idx in (select ca_idx 
            	     				 from category 
            	   					 where ca_no like '4-%'
           	    					 )
           	    	 ) -->
</mapper>